(function(){var e={6700:function(e,t,s){var i={"./af":3906,"./af.js":3906,"./ar":902,"./ar-dz":3853,"./ar-dz.js":3853,"./ar-kw":299,"./ar-kw.js":299,"./ar-ly":6825,"./ar-ly.js":6825,"./ar-ma":6379,"./ar-ma.js":6379,"./ar-sa":7700,"./ar-sa.js":7700,"./ar-tn":2059,"./ar-tn.js":2059,"./ar.js":902,"./az":6043,"./az.js":6043,"./be":7936,"./be.js":7936,"./bg":4078,"./bg.js":4078,"./bm":4014,"./bm.js":4014,"./bn":9554,"./bn-bd":7114,"./bn-bd.js":7114,"./bn.js":9554,"./bo":6529,"./bo.js":6529,"./br":5437,"./br.js":5437,"./bs":9647,"./bs.js":9647,"./ca":9951,"./ca.js":9951,"./cs":6113,"./cs.js":6113,"./cv":7965,"./cv.js":7965,"./cy":5858,"./cy.js":5858,"./da":3515,"./da.js":3515,"./de":2831,"./de-at":6263,"./de-at.js":6263,"./de-ch":1127,"./de-ch.js":1127,"./de.js":2831,"./dv":4510,"./dv.js":4510,"./el":8616,"./el.js":8616,"./en-au":4595,"./en-au.js":4595,"./en-ca":3545,"./en-ca.js":3545,"./en-gb":9609,"./en-gb.js":9609,"./en-ie":3727,"./en-ie.js":3727,"./en-il":3302,"./en-il.js":3302,"./en-in":6305,"./en-in.js":6305,"./en-nz":9128,"./en-nz.js":9128,"./en-sg":4569,"./en-sg.js":4569,"./eo":650,"./eo.js":650,"./es":6358,"./es-do":4214,"./es-do.js":4214,"./es-mx":8639,"./es-mx.js":8639,"./es-us":232,"./es-us.js":232,"./es.js":6358,"./et":7279,"./et.js":7279,"./eu":5515,"./eu.js":5515,"./fa":7981,"./fa.js":7981,"./fi":7090,"./fi.js":7090,"./fil":9208,"./fil.js":9208,"./fo":2799,"./fo.js":2799,"./fr":3463,"./fr-ca":2213,"./fr-ca.js":2213,"./fr-ch":2848,"./fr-ch.js":2848,"./fr.js":3463,"./fy":1468,"./fy.js":1468,"./ga":8163,"./ga.js":8163,"./gd":2898,"./gd.js":2898,"./gl":6312,"./gl.js":6312,"./gom-deva":682,"./gom-deva.js":682,"./gom-latn":9178,"./gom-latn.js":9178,"./gu":5009,"./gu.js":5009,"./he":2795,"./he.js":2795,"./hi":7009,"./hi.js":7009,"./hr":6506,"./hr.js":6506,"./hu":9565,"./hu.js":9565,"./hy-am":3864,"./hy-am.js":3864,"./id":5626,"./id.js":5626,"./is":6649,"./is.js":6649,"./it":151,"./it-ch":5348,"./it-ch.js":5348,"./it.js":151,"./ja":9830,"./ja.js":9830,"./jv":3751,"./jv.js":3751,"./ka":3365,"./ka.js":3365,"./kk":5980,"./kk.js":5980,"./km":9571,"./km.js":9571,"./kn":5880,"./kn.js":5880,"./ko":6809,"./ko.js":6809,"./ku":6773,"./ku.js":6773,"./ky":5505,"./ky.js":5505,"./lb":553,"./lb.js":553,"./lo":1237,"./lo.js":1237,"./lt":1563,"./lt.js":1563,"./lv":1057,"./lv.js":1057,"./me":6495,"./me.js":6495,"./mi":3096,"./mi.js":3096,"./mk":3874,"./mk.js":3874,"./ml":6055,"./ml.js":6055,"./mn":7747,"./mn.js":7747,"./mr":7113,"./mr.js":7113,"./ms":8687,"./ms-my":7948,"./ms-my.js":7948,"./ms.js":8687,"./mt":4532,"./mt.js":4532,"./my":4655,"./my.js":4655,"./nb":6961,"./nb.js":6961,"./ne":2512,"./ne.js":2512,"./nl":8448,"./nl-be":2936,"./nl-be.js":2936,"./nl.js":8448,"./nn":9031,"./nn.js":9031,"./oc-lnc":5174,"./oc-lnc.js":5174,"./pa-in":118,"./pa-in.js":118,"./pl":3448,"./pl.js":3448,"./pt":3518,"./pt-br":2447,"./pt-br.js":2447,"./pt.js":3518,"./ro":817,"./ro.js":817,"./ru":262,"./ru.js":262,"./sd":8990,"./sd.js":8990,"./se":3842,"./se.js":3842,"./si":7711,"./si.js":7711,"./sk":756,"./sk.js":756,"./sl":3772,"./sl.js":3772,"./sq":6187,"./sq.js":6187,"./sr":732,"./sr-cyrl":5713,"./sr-cyrl.js":5713,"./sr.js":732,"./ss":9455,"./ss.js":9455,"./sv":9770,"./sv.js":9770,"./sw":959,"./sw.js":959,"./ta":6459,"./ta.js":6459,"./te":5302,"./te.js":5302,"./tet":7975,"./tet.js":7975,"./tg":1294,"./tg.js":1294,"./th":2385,"./th.js":2385,"./tk":4613,"./tk.js":4613,"./tl-ph":8668,"./tl-ph.js":8668,"./tlh":8190,"./tlh.js":8190,"./tr":4506,"./tr.js":4506,"./tzl":3440,"./tzl.js":3440,"./tzm":9852,"./tzm-latn":2350,"./tzm-latn.js":2350,"./tzm.js":9852,"./ug-cn":730,"./ug-cn.js":730,"./uk":99,"./uk.js":99,"./ur":2100,"./ur.js":2100,"./uz":6002,"./uz-latn":6322,"./uz-latn.js":6322,"./uz.js":6002,"./vi":4207,"./vi.js":4207,"./x-pseudo":4674,"./x-pseudo.js":4674,"./yo":570,"./yo.js":570,"./zh-cn":3644,"./zh-cn.js":3644,"./zh-hk":2591,"./zh-hk.js":2591,"./zh-mo":9503,"./zh-mo.js":9503,"./zh-tw":8080,"./zh-tw.js":8080};function o(e){var t=l(e);return s(t)}function l(e){if(!s.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=l,e.exports=o,o.id=6700},9509:function(e,t,s){"use strict";var i=s(9242),o=s(3556),l=s(3396);const n={id:"main",style:{"background-color":"#dcedc8","-webkit-background-size":"cover","-moz-background-size":"cover","-o-background-size":"cover","background-size":"cover"}},a={class:"flex justify-content-center my-5"};function r(e,t,s,i,o,r){const d=(0,l.up)("Toast"),u=(0,l.up)("NavBar"),c=(0,l.up)("router-view");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(d),(0,l._)("div",n,[(0,l.Wm)(u),(0,l._)("div",a,[(0,l.Wm)(c)])])],64)}s(6699);var d=s(7139);const u=(0,l.Uk)(" SWC "),c={class:"p-button-set"};function m(e,t,s,i,o,n){const a=(0,l.up)("Button"),r=(0,l.up)("router-link"),m=(0,l.up)("NotificationsPanel"),p=(0,l.up)("OverlayPanel"),f=(0,l.up)("Menubar");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(f,{model:o.items},{start:(0,l.w5)((()=>[u])),item:(0,l.w5)((({item:e})=>[e.role.includes(i.userStore.role)?((0,l.wg)(),(0,l.j4)(r,{key:0,to:e.to},{default:(0,l.w5)((({href:t,navigate:s})=>[(0,l.Wm)(a,{class:"p-button-text",href:t,style:{color:"darkgreen"},onClick:s},{default:(0,l.w5)((()=>[(0,l.Uk)((0,d.zw)(e.label),1)])),_:2},1032,["href","onClick"])])),_:2},1032,["to"])):(0,l.kq)("",!0)])),end:(0,l.w5)((()=>[(0,l._)("span",c,[i.userStore.isLogged?((0,l.wg)(),(0,l.j4)(a,{key:0,icon:"pi pi-bell",class:"p-button-text p-button-rounded",badge:n.notificationsBadge,style:{color:"darkgreen","font-weight":"bold"},onClick:n.toggleOP},null,8,["badge","onClick"])):(0,l.kq)("",!0),(0,l.Wm)(p,{ref:"op"},{default:(0,l.w5)((()=>[(0,l.Wm)(m)])),_:1},512),(0,l.Wm)(r,{to:"/dashboard/account"},{default:(0,l.w5)((({href:e,navigate:t})=>[(0,l.Wm)(a,{href:e,icon:"pi pi-user",class:"p-button-text p-button-rounded",style:{color:"darkgreen","font-weight":"bold"},onClick:t},null,8,["href","onClick"])])),_:1})])])),_:1},8,["model"])])}var p=s(5106),f=s(1826),v=s(1901);const h={key:0,class:"outer-container"},g={class:"notifications-container flex flex-column-reverse"},b={class:"title"},w={class:"description"},k={class:"flex justify-content-between flex-wrap",style:{padding:"0"}},_=(0,l.Uk)(" Delete "),y=(0,l.Uk)(" Mark as read "),C={key:1};function $(e,t,s,i,o,n){const a=(0,l.up)("Button"),r=(0,l.up)("Card"),u=(0,l.up)("ScrollPanel");return(0,l.wg)(),(0,l.iD)(l.HY,null,[i.notStore.empty?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",h,[(0,l.Wm)(u,{style:{height:"400px"}},{default:(0,l.w5)((()=>[(0,l._)("div",g,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.notStore.notifications,(e=>((0,l.wg)(),(0,l.j4)(r,{key:e._id,style:{"margin-bottom":".7rem"}},{title:(0,l.w5)((()=>[(0,l._)("p",b," Booking: "+(0,d.zw)(e.booking._id),1)])),content:(0,l.w5)((()=>[(0,l._)("p",w," Your at home collection booking is "+(0,d.zw)(e.booking.status),1)])),footer:(0,l.w5)((()=>[(0,l._)("div",k,[(0,l.Wm)(a,{class:"p-button-rounded p-button-sm",onClick:t=>i.notStore.delete(e)},{default:(0,l.w5)((()=>[_])),_:2},1032,["onClick"]),e.isRead?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(a,{key:0,class:"p-button-rounded p-button-sm",onClick:t=>i.notStore.markAsRead(e)},{default:(0,l.w5)((()=>[y])),_:2},1032,["onClick"]))])])),_:2},1024)))),128))])])),_:1})])),i.notStore.empty?((0,l.wg)(),(0,l.iD)("p",C," No new notifications ")):(0,l.kq)("",!0)],64)}var j=s(2066),D=s(6265),S=s.n(D);const W=(0,o.Q_)("booking",{state:()=>({bookings:[]}),getters:{},actions:{updateBooking(e){let t=this.bookings.filter((t=>t._id===e._id));this.bookings.splice(this.bookings.indexOf(t),1,e)},fetchUserBookings(e){S().get("http://localhost:3000/bookings/user/"+e).then((e=>this.bookings=e.data.reverse()))},fetchAllBookings(){S().get("http://localhost:3000/bookings/").then((e=>this.bookings=e.data.reverse()))}}}),x=(0,o.Q_)("socket",{state:()=>({socket:(0,j.io)("http://localhost:3000",{autoConnect:!1}),sessionId:""}),getters:{},actions:{connect(e){console.log("Connecting... "+e),this.socket.auth={userId:e},this.socket.connect(),this.socket.on("session",(({sessionId:e,uid:t})=>{this.socket.auth={sessionId:e},this.sessionId=e,console.log("sessionId: ",this.sessionId),console.log("userId: ",t)})),this.receiveNotification()},reconnect(){console.log("sessionId: ",this.sessionId),this.socket.auth={sessionId:this.sessionId},this.socket.connect(),this.socket.on("session",(({sessionId:e,uid:t})=>{console.log("sessionId: ",e),console.log("userId: ",t)})),this.receiveNotification()},receiveNotification(){this.socket.on("assigned",(e=>{console.log("notification received"),P().addNotification(e),W().updateBooking(e.booking)}))},emit(e,t){this.socket.emit(e,t)},disconnect(){this.socket.disconnect()}},persist:{paths:["sessionId"]}}),P=(0,o.Q_)("notification",{state:()=>({notifications:[]}),getters:{getUnreadNotifications:e=>e.notifications.filter((e=>!e.isRead)),getUnreadNumber(){return this.getUnreadNotifications.length},empty(){return 0===this.notifications.length}},actions:{addNotification(e){this.notifications.includes(e)||this.notifications.push(e)},markAsRead(e){e.isRead=!0,x().emit("markAsRead",{id:e._id,notification:e})},delete(e){this.notifications.splice(this.notifications.indexOf(e),1),x().emit("delete",e._id)},logout(){this.notifications=[]}}});var I=s(606),O=s(9569),T={name:"NotificationsPanel",components:{Card:I.Z,Button:f.Z,ScrollPanel:O.Z},setup(){const e=P();return{notStore:e}}},V=s(89);const E=(0,V.Z)(T,[["render",$],["__scopeId","data-v-6ce6e470"]]);var Z=E;const M=(0,o.Q_)("user",{state:()=>({firstname:"",lastname:"",email:"",userId:"",role:""}),getters:{getUserName:e=>e.firstname+" "+e.lastname,isLogged:e=>""!==e.userId,isCitizen:e=>"CITIZEN"===e.role,isManager:e=>"MANAGER"===e.role},actions:{login(e){this.firstname=e.firstname,this.lastname=e.lastname,this.email=e.username,this.userId=e._id,this.role=e.role},logout(){this.firstname="",this.lastname="",this.email="",this.userId="",this.role=""}},persist:!0});var z={name:"NavBar",components:{Menubar:p.Z,Button:f.Z,NotificationsPanel:Z,OverlayPanel:v.Z},setup(){const e=P(),t=M();return{notStore:e,userStore:t}},data(){return{items:[{label:"Map",to:"/dashboard/map",role:["","CITIZEN","MANAGER"]},{label:"Missions",to:"/dashboard/missions",role:["MANAGER"]},{label:"Trucks",to:"/dashboard/trucks",role:["MANAGER"]},{label:"Complaints",to:"/dashboard/complaints",role:["MANAGER","CITIZEN"]},{label:"Bookings",to:"/dashboard/bookings",role:["CITIZEN","MANAGER"]}]}},computed:{notificationsBadge(){return this.notStore.getUnreadNumber>0?this.notStore.getUnreadNumber.toString():""}},methods:{toggleOP(e){this.$refs.op.toggle(e)}}};const U=(0,V.Z)(z,[["render",m],["__scopeId","data-v-43d7ade7"]]);var N=U,A=s(6823),B={name:"App",components:{NavBar:N,Toast:A.Z}};const q=(0,V.Z)(B,[["render",r]]);var F=q,R=s(7729),L=s(2531),H=s(6171),Y=s(2483),G=s(3723);const K={class:"flex flex-column"},X={class:"flex align-content-center justify-content-end m-2"},Q={style:{width:"80vw",height:"80vh"}};function J(e,t,s,i,o,n){const a=(0,l.up)("AddCollectionPointButton"),r=(0,l.up)("l-tile-layer"),d=(0,l.up)("CollectionPointMarkers"),u=(0,l.up)("TruckMarkers"),c=(0,l.up)("l-map"),m=(0,l.up)("CollectionPointSidebar"),p=(0,l.up)("TruckSidebar");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",K,[(0,l._)("div",X,[(0,l.Wm)(a,{onPick:n.activatePositionPicker,onInsert:t[0]||(t[0]=t=>{e.$router.push("/dashboard/collectionPoints/new/")})},null,8,["onPick"])]),(0,l._)("div",Q,[(0,l.Wm)(c,{id:"map",ref:"map",modelValue:o.zoom,"onUpdate:modelValue":t[1]||(t[1]=e=>o.zoom=e),zoom:o.zoom,"onUpdate:zoom":t[2]||(t[2]=e=>o.zoom=e),"max-zoom":18,"min-zoom":5,"zoom-animation":!1,center:[o.userCoords.latitude,o.userCoords.longitude],"scroll-zoom":!1,onReady:n.mapIsReady},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,l.Wm)(d,{onOpenSidebar:n.openSidebar},null,8,["onOpenSidebar"]),i.userStore.isManager?((0,l.wg)(),(0,l.j4)(u,{key:0,onOpenSidebar:n.openSidebar},null,8,["onOpenSidebar"])):(0,l.kq)("",!0)])),_:1},8,["modelValue","zoom","center","onReady"])])]),n.collectionPointIsClicked?((0,l.wg)(),(0,l.j4)(m,{key:0,"side-visibility":o.sidebarVisible,"item-id":o.markerClicked,onClosed:n.sidebarClosed},null,8,["side-visibility","item-id","onClosed"])):(0,l.kq)("",!0),n.truckIsClicked?((0,l.wg)(),(0,l.j4)(p,{key:1,"side-visibility":o.sidebarVisible,"item-id":o.markerClicked,onClosed:n.sidebarClosed},null,8,["side-visibility","item-id","onClosed"])):(0,l.kq)("",!0)],64)}var ee=s(4575);const te={class:"flex flex-wrap align-content-center justify-content-end"},se={class:"flex justify-content-around"},ie={class:"flex flex-column justify-content-evenly"};function oe(e,t,s,i,o,n){const a=(0,l.up)("Button"),r=(0,l.up)("DumpsterCard"),u=(0,l.up)("Sidebar");return(0,l.wg)(),(0,l.j4)(u,{onItemUpdated:n.updateCollectionPointId},(0,l.Nv)({header:(0,l.w5)((()=>[(0,l._)("div",te,[(0,l._)("div",null,[(0,l._)("h1",null,(0,d.zw)(o.collectionPointId),1)]),(0,l._)("div",se,[(0,l.Wm)(a,{class:"p-button-rounded p-button-success m-1",icon:"pi pi-plus"}),(0,l.Wm)(a,{class:"p-button-rounded p-button-danger m-1",icon:"pi pi-trash",onClick:t[0]||(t[0]=t=>e.$emit("deleteCollectionPoint",o.collectionPointId))})])])])),_:2},[null!==o.dumpsters?{name:"content",fn:(0,l.w5)((()=>[(0,l._)("div",ie,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.dumpsters,(e=>((0,l.wg)(),(0,l.j4)(r,{key:e,class:"flex align-items-center justify-content-center m-2",dumpster:e,onDelete:t=>n.deleteDumpster(e)},null,8,["dumpster","onDelete"])))),128))])]))}:void 0]),1032,["onItemUpdated"])}function le(e,t,s,i,o,n){const a=(0,l.up)("Divider"),r=(0,l.up)("Sidebar",!0);return(0,l.wg)(),(0,l.j4)(r,{visible:o.visible,"onUpdate:visible":t[0]||(t[0]=e=>o.visible=e),position:"right",class:"p-sidebar-md",onHide:n.hide},{default:(0,l.w5)((()=>[(0,l.WI)(e.$slots,"header"),(0,l.Wm)(a),(0,l.WI)(e.$slots,"content")])),_:3},8,["visible","onHide"])}var ne=s(4146),ae=s(3647),re={name:"SideBar",components:{Sidebar:ne.Z,Divider:ae.Z},props:{sideVisibility:Boolean,itemId:{type:String,default:"-1"}},emits:["closed","itemUpdated"],data(){return{visible:this.sideVisibility}},watch:{sideVisibility(e){this.visible=e},itemId(e){this.$emit("itemUpdated",e)}},mounted(){this.$emit("itemUpdated",this.itemId)},methods:{hide(){this.$emit("closed")}}};const de=(0,V.Z)(re,[["render",le]]);var ue=de;const ce=e=>((0,l.dD)("data-v-83e52b1e"),e=e(),(0,l.Cn)(),e),me={class:"flex flex-wrap align-content-start w-100"},pe={class:"flex flex-wrap justify-content-end align-content-center"},fe={style:{margin:"0"}},ve=(0,l.Uk)(" Status: "),he=(0,l.Uk)(" Type of waste: "),ge={class:"flex justify-content-start align-content-center"},be=ce((()=>(0,l._)("p",null,"Occupied percentage:",-1)));function we(e,t,s,i,o,n){const a=(0,l.up)("Button"),r=(0,l.up)("Divider"),u=(0,l.up)("Tag"),c=(0,l.up)("ProgressBar"),m=(0,l.up)("Card");return(0,l.wg)(),(0,l.iD)("div",me,[(0,l.Wm)(m,null,{title:(0,l.w5)((()=>[(0,l._)("div",pe,[(0,l._)("div",null,[(0,l._)("h3",fe,(0,d.zw)(s.dumpster.id),1)]),(0,l.Wm)(a,{icon:"pi pi-trash",class:"p-button-danger p-button-rounded",onClick:t[0]||(t[0]=t=>e.$emit("delete"))})]),(0,l.Wm)(r)])),content:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l._)("p",null,[ve,(0,l._)("span",{class:(0,d.C_)("dumpster-"+n.dumpsterStatusToValue.replace(" ","-"))},(0,d.zw)(n.dumpsterStatusToValue.toUpperCase()),3)]),(0,l._)("div",null,[he,(0,l.Wm)(u,{value:n.dumpsterOrdinaryWaste.wasteName,rounded:!0,style:(0,d.j5)(n.cssDumpsterColor)},null,8,["value","style"])]),(0,l._)("div",ge,[be,(0,l.Wm)(c,{class:"mt-3 ml-2",value:n.dumpsterOccupiedPercentage,style:{width:"60%"}},{default:(0,l.w5)((()=>[(0,l.Uk)((0,d.zw)(n.dumpsterOccupiedPercentage)+"% ",1)])),_:1},8,["value"])])])])),_:1})])}var ke=s(9203),_e=s(1492),ye={name:"DCard",components:{Card:I.Z,Tag:ke.Z,ProgressBar:_e.Z,Divider:ae.Z,Button:f.Z},props:{dumpster:{type:Object,default:null}},emits:["delete"],computed:{dumpsterStatusToValue(){return this.dumpster.available?"available":"not available"},dumpsterOccupiedPercentage(){return this.dumpster.occupiedVolume.value/this.dumpster.dumpsterType.size.capacity*100},dumpsterOrdinaryWaste(){return this.dumpster.dumpsterType.typeOfOrdinaryWaste},cssDumpsterColor(){return{"background-color":this.dumpsterOrdinaryWaste.wasteColor.toLowerCase()}}}};const Ce=(0,V.Z)(ye,[["render",we],["__scopeId","data-v-83e52b1e"]]);var $e=Ce,je={name:"CollectionPointSidebar",components:{Sidebar:ue,DumpsterCard:$e,Button:f.Z},emits:["deleteCollectionPoint"],data(){return{collectionPointId:null,dumpsters:[]}},methods:{fetchCollectionPointDumpsters(){this.dumpsters=[],S().get({NODE_ENV:"production",BASE_URL:"/dashboard/"}.VUE_APP_DUMPSTER_MICROSERVICE+"/collectionpoints/"+this.collectionPointId+"/dumpsters",{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PATCH, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token"}}).then((e=>{console.log(e),e.data.forEach((e=>this.dumpsters.push(e)))}))},updateCollectionPointId(e){this.collectionPointId=e,this.fetchCollectionPointDumpsters()},deleteDumpster(e){this.dumpsters.splice(this.dumpsters.indexOf(e),1),S()["delete"]({NODE_ENV:"production",BASE_URL:"/dashboard/"}.VUE_APP_DUMPSTER_MICROSERVICE+"/dumpsters/"+e.id).then((e=>{console.log(e)}))}}};const De=(0,V.Z)(je,[["render",oe]]);var Se=De;const We=e=>((0,l.dD)("data-v-657b86bb"),e=e(),(0,l.Cn)(),e),xe=We((()=>(0,l._)("p",null,null,-1))),Pe=We((()=>(0,l._)("p",null,"Occupied percentage:",-1))),Ie={class:"flex justify-content-between"},Oe=We((()=>(0,l._)("h3",null,"Go to mission details",-1)));function Te(e,t,s,i,o,n){const a=(0,l.up)("ProgressBar"),r=(0,l.up)("Button"),u=(0,l.up)("Sidebar");return(0,l.wg)(),(0,l.j4)(u,{onItemUpdated:n.updateTruckId},{header:(0,l.w5)((()=>[(0,l._)("h1",null," Truck "+(0,d.zw)(o.truckId),1),xe])),content:(0,l.w5)((()=>[Pe,(0,l.Wm)(a,{value:n.truckOccupiedPercentage},{default:(0,l.w5)((()=>[(0,l.Uk)((0,d.zw)(n.truckOccupiedPercentage)+"% ",1)])),_:1},8,["value"]),(0,l._)("div",Ie,[Oe,(0,l.Wm)(r,{icon:"pi pi-arrow-right",class:"p-button-rounded m-2",onClick:n.goToMissionDetails},null,8,["onClick"])])])),_:1},8,["onItemUpdated"])}var Ve={name:"TruckSidebar",components:{Sidebar:ue,ProgressBar:_e.Z,Button:f.Z},emits:["exited"],data(){return{truckId:null,truck:null}},computed:{truckOccupiedPercentage(){return this.truck.occupiedVolume/this.truck.capacity*100}},methods:{updateTruckId(e){this.truckId=e,this.truck={occupiedVolume:30,capacity:100}},goToMissionDetails(){this.$emit("exited"),this.$router.push("/dashboard/missions/1")}}};const Ee=(0,V.Z)(Ve,[["render",Te],["__scopeId","data-v-657b86bb"]]);var Ze=Ee;function Me(e,t,s,i,o,n){const a=(0,l.up)("MarkerComponent");return(0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.collectionPoints,(t=>((0,l.wg)(),(0,l.j4)(a,{key:t,lat:t.position.latitude,lng:t.position.longitude,"icon-path":"https://i.postimg.cc/PfCmTmb2/collection-point.png",onClick:s=>e.$emit("open-sidebar",t.id)},null,8,["lat","lng","icon-path","onClick"])))),128)}function ze(e,t,s,i,o,n){const a=(0,l.up)("l-marker");return(0,l.wg)(),(0,l.j4)(a,{"lat-lng":[s.lat,s.lng],icon:n.createIcon},null,8,["lat-lng","icon"])}var Ue=s(3153),Ne=s.n(Ue),Ae={name:"MarkerComponent",components:{LMarker:ee.$R},props:{lat:{type:Number,default:0,require:!0},lng:{type:Number,default:0,require:!0},iconPath:{type:String}},computed:{createIcon(){return Ne().icon({iconUrl:this.iconPath,iconSize:[32,32]})}}};const Be=(0,V.Z)(Ae,[["render",ze]]);var qe=Be,Fe={name:"CollectionPointMarkers",components:{MarkerComponent:qe},emits:["open-sidebar"],data(){return{collectionPoints:[]}},mounted(){this.fetchCollectionPoints()},methods:{fetchCollectionPoints(){S().get({NODE_ENV:"production",BASE_URL:"/dashboard/"}.VUE_APP_DUMPSTER_MICROSERVICE+"/collectionpoints",{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PATCH, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token"}}).then((e=>{console.log(e),e.data.forEach((e=>this.collectionPoints.push(e)))}))}}};const Re=(0,V.Z)(Fe,[["render",Me]]);var Le=Re;function He(e,t,s,i,o,n){const a=(0,l.up)("MarkerComponent");return(0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.trucks,(t=>((0,l.wg)(),(0,l.j4)(a,{key:t,lat:t.position.latitude,lng:t.position.longitude,"icon-path":"https://i.postimg.cc/tCcLj6dL/garbage-truck.png",onClick:s=>e.$emit("open-sidebar",t.truckId)},null,8,["lat","lng","icon-path","onClick"])))),128)}var Ye=s(4723),Ge=s.n(Ye),Ke=s(1120),Xe=s.n(Ke),Qe={name:"CollectionPointMarkers",components:{MarkerComponent:qe},emits:["open-sidebar"],data(){return{trucks:[]}},mounted(){for(let e=0;e<3;e++){let t=Ge()({min:44.14,max:44.2}),s=Xe()({min:12.24,max:12.3});this.trucks.push({truckId:"T-"+e,position:{latitude:t,longitude:s}})}},methods:{}};const Je=(0,V.Z)(Qe,[["render",He]]);var et=Je;function tt(e,t,s,i,o,n){const a=(0,l.up)("SplitButton");return(0,l.wg)(),(0,l.j4)(a,{model:o.items,label:"Add new Collection Point"},null,8,["model"])}var st=s(8959),it={name:"AddCollectionPointButton",components:{SplitButton:st.Z},emits:["pick","insert"],data(){return{items:[{label:"choosing",command:()=>this.$emit("pick")},{label:"by insert",command:()=>this.$emit("insert")}]}}};const ot=(0,V.Z)(it,[["render",tt],["__scopeId","data-v-1cd9af5b"]]);var lt=ot,nt={name:"MapComponent",components:{CollectionPointMarkers:Le,TruckSidebar:Ze,CollectionPointSidebar:Se,TruckMarkers:et,AddCollectionPointButton:lt,LMap:ee.iA,LTileLayer:ee.Hw},setup(){const e=M();return{userStore:e}},data(){return{zoom:13,map:null,userCoords:{latitude:44.2227278,longitude:12.041273},sidebarVisible:!1,markerClicked:null,locationWatcher:null}},computed:{collectionPointIsClicked(){return null!=this.markerClicked&&this.markerClicked.startsWith("C")},truckIsClicked(){return null!=this.markerClicked&&this.markerClicked.startsWith("T")}},unmounted(){null!==this.locationWatcher&&navigator.geolocation.clearWatch(this.locationWatcher)},methods:{mapIsReady(){this.map=this.$refs.map.leafletObject,null!==this.map&&(this.map.scrollWheelZoom.disable(),navigator.geolocation&&(this.locationWatcher=navigator.geolocation.watchPosition((e=>{this.userCoords=e.coords,this.map.flyTo([this.userCoords.latitude,this.userCoords.longitude])}))))},openSidebar(e){this.markerClicked=e,this.sidebarVisible=!0},sidebarClosed(){this.sidebarVisible=!1},activatePositionPicker(){null!==this.map&&(document.getElementById("map").style.cursor="crosshair",this.map.on("click",(e=>{document.getElementById("map").style.cursor="",this.$router.push(`/dashboard/collectionPoints/new/${e.latlng.lat}/${e.latlng.lng}`)})))}}};const at=(0,V.Z)(nt,[["render",J],["__scopeId","data-v-2bda2596"]]);var rt=at;const dt=e=>((0,l.dD)("data-v-0f054eda"),e=e(),(0,l.Cn)(),e),ut=dt((()=>(0,l._)("h1",null," Missions ",-1))),ct={class:"flex p-8 w-screen"};function mt(e,t,s,i,o,n){const a=(0,l.up)("Column"),r=(0,l.up)("Button"),u=(0,l.up)("router-link"),c=(0,l.up)("DataTable");return(0,l.wg)(),(0,l.iD)("div",null,[ut,(0,l._)("div",ct,[(0,l.Wm)(c,{value:o.missions,class:"p-datatable-lg w-full","responsive-layout":"scroll"},{default:(0,l.w5)((()=>[(0,l.Wm)(a,{field:"id",header:"ID"}),(0,l.Wm)(a,{field:"date",header:"Date"}),(0,l.Wm)(a,{field:"typeOfWaste",header:"Type Of Waste"}),(0,l.Wm)(a,{field:"typeOfMission",header:"TypeOfMission"}),(0,l.Wm)(a,{field:"truck",header:"Truck"}),(0,l.Wm)(a,{field:"completed",header:"Status"},{body:(0,l.w5)((e=>[(0,l._)("span",{class:(0,d.C_)("mission-status-"+e.data.completed)},(0,d.zw)(n.missionStatus(e.data.completed)),3)])),_:1}),(0,l.Wm)(a,{header:"Steps"},{body:(0,l.w5)((e=>[(0,l.Wm)(u,{to:n.missionDetailsPath(e.data.id)},{default:(0,l.w5)((({href:e,navigate:t})=>[(0,l.Wm)(r,{href:e,class:"p-button-sm p-button-raised p-button-text",icon:"pi pi-list",onClick:t},null,8,["href","onClick"])])),_:2},1032,["to"])])),_:1})])),_:1},8,["value"])])])}var pt=s(2424),ft=s(3717),vt=JSON.parse('{"j":[{"id":"1","date":"01-07-2022","typeOfWaste":"ORGANIC","typeOfMission":"ORDINARY","completed":"false","truck":"123","steps":[{"collectionPoint":"1","completed":"false"},{"collectionPoint":"2","completed":"false"},{"collectionPoint":"3","completed":"true"},{"collectionPoint":"4","completed":"true"},{"collectionPoint":"5","completed":"true"}]},{"id":"2","date":"01-07-2022","typeOfWaste":"PAPER","typeOfMission":"ORDINARY","completed":"true","truck":"456","steps":[{"collectionPoint":"1","completed":"true"},{"collectionPoint":"2","completed":"true"},{"collectionPoint":"3","completed":"true"},{"collectionPoint":"4","completed":"true"},{"collectionPoint":"5","completed":"true"}]},{"id":"1","date":"01-07-2022","typeOfWaste":"TWIGS","typeOfMission":"EXTRAORDINARY","completed":"false","truck":"789","steps":[{"home":"1","completed":"false"},{"home":"2","completed":"false"},{"home":"3","completed":"true"},{"home":"4","completed":"true"},{"home":"5","completed":"true"}]}]}'),ht={name:"MissionsList",components:{DataTable:pt.Z,Column:ft.Z,Button:f.Z},data(){return{missions:[]}},mounted(){this.missions=vt.j},methods:{missionDetailsPath(e){return"/dashboard/missions/"+e},missionStatus(e){return console.log("mission-status-"+e),"true"===e?"COMPLETED":"IN PROGRESS"}}};const gt=(0,V.Z)(ht,[["render",mt],["__scopeId","data-v-0f054eda"]]);var bt=gt;const wt={class:"flex flex-column w-full"},kt={style:{"text-align":"right"}},_t={class:"col-12 md:col-4",style:{"background-color":"#EFF3F8"}},yt={style:{"text-transform":"capitalize"}},Ct={style:{"list-style-type":"none","text-align":"start"}},$t=(0,l.Uk)(" Status: "),jt={key:0},Dt={key:0},St=(0,l.Uk)(" CLOSE "),Wt=(0,l.Uk)(" No Complaints to Show ");function xt(e,t,s,i,o,n){const a=(0,l.up)("Button"),r=(0,l.up)("ComplaintFilterPanel"),u=(0,l.up)("OverlayPanel"),c=(0,l.up)("Divider"),m=(0,l.up)("Card"),p=(0,l.up)("DataView"),f=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)("div",wt,[(0,l.Wm)(p,{value:n.filteredComplaints,layout:"grid",paginator:!0,rows:9,class:"m-5"},{header:(0,l.w5)((()=>[(0,l._)("div",kt,[(0,l.Wm)(a,{class:"p-button-text p-button-rounded",icon:"pi pi-filter",onClick:t[0]||(t[0]=t=>e.$refs.fop.toggle(t))})]),(0,l.Wm)(u,{ref:"fop"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{filters:o.filters,onFilters:n.applyFilters},null,8,["filters","onFilters"])])),_:1},512)])),grid:(0,l.w5)((e=>[(0,l._)("div",_t,[(0,l.Wm)(m,{style:{margin:"30px 30px","box-shadow":"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)"}},{title:(0,l.w5)((()=>[(0,l._)("p",yt,(0,d.zw)(e.data.title),1)])),subtitle:(0,l.w5)((()=>[(0,l._)("ul",Ct,[(0,l._)("li",null," ID: "+(0,d.zw)(e.data.id),1),(0,l._)("li",null,[$t,(0,l._)("span",{class:(0,d.C_)("complaint-"+e.data.status.toLowerCase())},(0,d.zw)(e.data.status),3)]),i.userStore.isManager?((0,l.wg)(),(0,l.iD)("li",jt," Issuer: "+(0,d.zw)(e.data.issuer),1)):(0,l.kq)("",!0)])])),content:(0,l.w5)((()=>[(0,l.Uk)((0,d.zw)(e.data.message),1)])),footer:(0,l.w5)((()=>[i.userStore.isManager&&"OPEN"===e.data.status?((0,l.wg)(),(0,l.iD)("div",Dt,[(0,l.Wm)(c),(0,l.Wm)(a,{onClick:t=>e.data.status="CLOSE"},{default:(0,l.w5)((()=>[St])),_:2},1032,["onClick"])])):(0,l.kq)("",!0)])),_:2},1024)])])),empty:(0,l.w5)((()=>[Wt])),_:1},8,["value"]),i.userStore.isCitizen?((0,l.wg)(),(0,l.j4)(f,{key:0,to:"/dashboard/complaints/new"},{default:(0,l.w5)((({href:e,navigate:t})=>[(0,l.Wm)(a,{href:e,label:"Create New",class:"p-button-raised",onClick:t},null,8,["href","onClick"])])),_:1})):(0,l.kq)("",!0)])}var Pt=s(5530);const It=e=>((0,l.dD)("data-v-c451267a"),e=e(),(0,l.Cn)(),e),Ot={class:"outer-container"},Tt=It((()=>(0,l._)("h5",null,"STATUS",-1))),Vt={class:"field-checkbox"},Et=It((()=>(0,l._)("label",{class:"complaint-open",for:"state1"},"OPEN",-1))),Zt={class:"field-checkbox"},Mt=It((()=>(0,l._)("label",{class:"complaint-close",for:"state2"},"CLOSE",-1))),zt={key:0},Ut=It((()=>(0,l._)("h5",null,"ISSUER",-1))),Nt={class:"field-checkbox"},At=It((()=>(0,l._)("label",{for:"issuer1"},"CITIZEN",-1))),Bt={class:"field-checkbox"},qt=It((()=>(0,l._)("label",{for:"issuer1"},"DUMPSTER",-1))),Ft=(0,l.Uk)(" Apply ");function Rt(e,t,s,i,o,n){const a=(0,l.up)("Checkbox"),r=(0,l.up)("Divider"),d=(0,l.up)("Button");return(0,l.wg)(),(0,l.iD)("div",Ot,[Tt,(0,l._)("div",Vt,[(0,l.Wm)(a,{modelValue:o.statusFilters,"onUpdate:modelValue":t[0]||(t[0]=e=>o.statusFilters=e),name:"state","input-id":"state1",value:"OPEN"},null,8,["modelValue"]),Et]),(0,l._)("div",Zt,[(0,l.Wm)(a,{modelValue:o.statusFilters,"onUpdate:modelValue":t[1]||(t[1]=e=>o.statusFilters=e),name:"state","input-id":"state2",value:"CLOSE"},null,8,["modelValue"]),Mt]),i.userStore.isManager?((0,l.wg)(),(0,l.iD)("div",zt,[Ut,(0,l._)("div",Nt,[(0,l.Wm)(a,{modelValue:o.issuers,"onUpdate:modelValue":t[2]||(t[2]=e=>o.issuers=e),name:"issuer","input-id":"issuer1",value:"CITIZEN"},null,8,["modelValue"]),At]),(0,l._)("div",Bt,[(0,l.Wm)(a,{modelValue:o.issuers,"onUpdate:modelValue":t[3]||(t[3]=e=>o.issuers=e),name:"issuer","input-id":"issuer2",value:"DUMPSTER"},null,8,["modelValue"]),qt])])):(0,l.kq)("",!0),(0,l.Wm)(r),(0,l.Wm)(d,{class:"p-button-sm",onClick:t[4]||(t[4]=t=>e.$emit("filters",{statusFilters:o.statusFilters,issuers:o.issuers}))},{default:(0,l.w5)((()=>[Ft])),_:1})])}var Lt=s(3602),Ht={name:"ComplaintFilterPanel",components:{Checkbox:Lt.Z,Divider:ae.Z,Button:f.Z},props:{filters:{type:Object,require:!0,default:null}},emits:["filters"],setup(){const e=M();return{userStore:e}},data(){return{statusFilters:this.filters.statusFilters,issuers:this.filters.issuers}}};const Yt=(0,V.Z)(Ht,[["render",Rt],["__scopeId","data-v-c451267a"]]);var Gt=Yt,Kt={name:"ComplaintList",components:{ComplaintFilterPanel:Gt,OverlayPanel:v.Z,Button:f.Z,DataView:Pt.Z,Card:I.Z,Divider:ae.Z},setup(){const e=M();return{userStore:e}},data(){return{complaints:[],filters:{statusFilters:[],issuers:[]}}},computed:{filteredComplaints(){return this.complaints.filter((e=>0===this.filters.statusFilters.length||this.filters.statusFilters.includes(e.status))).filter((e=>0===this.filters.issuers.length||this.filters.issuers.includes(e.issuer)))}},created(){for(let e=0;e<15;e++)this.complaints.push({id:"345",ownerId:"123",title:"smart card reader broken",issuer:"CITIZEN",message:"the plastic dumpster in cp is broken",status:"OPEN"})},methods:{applyFilters(e){this.filters=e,this.$refs.fop.hide()}}};const Xt=(0,V.Z)(Kt,[["render",xt],["__scopeId","data-v-b38454a4"]]);var Qt=Xt;const Jt=e=>((0,l.dD)("data-v-2e4b9dda"),e=e(),(0,l.Cn)(),e),es={class:"grid"},ts={class:"col-5 flex align-items-center justify-content-center"},ss={class:"col-2"},is=Jt((()=>(0,l._)("b",null,"OR",-1))),os={class:"col-5 flex align-items-center justify-content-center"},ls=(0,l.Uk)(" Logout ");function ns(e,t,s,i,o,n){const a=(0,l.up)("LoginForm"),r=(0,l.up)("Divider"),u=(0,l.up)("Button"),c=(0,l.up)("router-link"),m=(0,l.up)("Card");return(0,l.wg)(),(0,l.iD)(l.HY,null,[i.userStore.isLogged?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(m,{key:0,class:"w-full"},{content:(0,l.w5)((()=>[(0,l._)("div",es,[(0,l._)("div",ts,[(0,l.Wm)(a)]),(0,l._)("div",ss,[(0,l.Wm)(r,{layout:"vertical"},{default:(0,l.w5)((()=>[is])),_:1})]),(0,l._)("div",os,[(0,l.Wm)(c,{to:"/dashboard/account/registration"},{default:(0,l.w5)((({href:e,navigate:t})=>[(0,l.Wm)(u,{href:e,label:"Sign Up",icon:"pi pi-user-plus",class:"p-button-success",onClick:t},null,8,["href","onClick"])])),_:1})])])])),_:1})),i.userStore.isLogged?((0,l.wg)(),(0,l.j4)(m,{key:1},{title:(0,l.w5)((()=>[(0,l.Uk)((0,d.zw)(i.userStore.getUserName),1)])),footer:(0,l.w5)((()=>[(0,l.Wm)(u,{onClick:t[0]||(t[0]=e=>n.logout())},{default:(0,l.w5)((()=>[ls])),_:1})])),_:1})):(0,l.kq)("",!0)],64)}const as={class:"field"},rs={key:0,class:"p-error"},ds={class:"field"},us={key:0,class:"p-error"},cs={key:1,class:"p-error"};function ms(e,t,s,o,n,a){const r=(0,l.up)("InputText"),u=(0,l.up)("Password"),c=(0,l.up)("Button");return(0,l.wg)(),(0,l.iD)("form",{class:"p-fluid",onSubmit:t[2]||(t[2]=(0,i.iM)((e=>a.handleSubmit(!o.v$.$invalid)),["prevent"]))},[(0,l._)("div",as,[(0,l._)("label",{for:"email",class:(0,d.C_)({"p-error":o.v$.email.$invalid&&n.submitted})},"Email",2),(0,l.Wm)(r,{id:"email",modelValue:o.v$.email.$model,"onUpdate:modelValue":t[0]||(t[0]=e=>o.v$.email.$model=e),class:(0,d.C_)({"p-invalid":o.v$.email.$invalid&&n.submitted}),type:"text"},null,8,["modelValue","class"]),o.v$.email.$invalid&&n.submitted||o.v$.email.$pending.$response?((0,l.wg)(),(0,l.iD)("small",rs,(0,d.zw)(o.v$.email.required.$message.replace("Value","Email")),1)):(0,l.kq)("",!0)]),(0,l._)("div",ds,[(0,l._)("label",{for:"password",class:(0,d.C_)({"p-error":o.v$.password.$invalid&&n.submitted})},"Password",2),(0,l.Wm)(u,{id:"password",modelValue:n.password,"onUpdate:modelValue":t[1]||(t[1]=e=>n.password=e),class:(0,d.C_)({"p-error":o.v$.password.$invalid&&n.submitted}),feedback:!1},null,8,["modelValue","class"]),o.v$.password.$invalid&&n.submitted||o.v$.password.$pending.$response?((0,l.wg)(),(0,l.iD)("small",us,(0,d.zw)(o.v$.password.required.$message.replace("Value","Password")),1)):(0,l.kq)("",!0),n.error?((0,l.wg)(),(0,l.iD)("small",cs,"Username or Password are incorrect")):(0,l.kq)("",!0)]),(0,l.Wm)(c,{type:"submit",label:"Login"})],32)}var ps=s(6709),fs=s(9117),vs=s(3053),hs=s(3789),gs={name:"LoginForm",components:{InputText:ps.Z,Button:f.Z,Password:hs.Z},setup(){const e=M(),t=x();return{v$:(0,vs.Xw)(),userStore:e,socketStore:t}},data(){return{email:"",password:"",submitted:null,error:!1}},validations(){return{email:{required:fs.C1,email:fs.Do},password:{required:fs.C1}}},methods:{handleSubmit(e){if(this.submitted=!0,e){let e={username:this.email,password:this.password};console.log(e),S().post("http://localhost:3002/authentication/login",e).then((e=>{200===e.status&&(console.log("Connetto..."),this.userStore.login(e.data.user),this.socketStore.connect(this.userStore.userId))})).catch((e=>{console.log("ERROR: "+e),console.log("account non trovato"),this.password="",this.submitted=!1,this.error=!0}))}}}};const bs=(0,V.Z)(gs,[["render",ms],["__scopeId","data-v-7a9a52f4"]]);var ws=bs,ks={name:"AccountComponent",components:{LoginForm:ws,Button:f.Z,Divider:ae.Z,Card:I.Z},setup(){const e=M(),t=x(),s=P();return{userStore:e,socketStore:t,notStore:s}},data(){return{}},methods:{logout(){this.userStore.logout(),this.socketStore.disconnect(),this.notStore.logout()}}};const _s=(0,V.Z)(ks,[["render",ns],["__scopeId","data-v-2e4b9dda"]]);var ys=_s;const Cs=e=>((0,l.dD)("data-v-8e5b2db6"),e=e(),(0,l.Cn)(),e),$s={class:"flex flex-column justify-content-start card-container m-5 w-full"},js=(0,l.Uk)(" Mission id "),Ds=Cs((()=>(0,l._)("ul",{style:{"list-style-type":"none","text-align":"left"}},[(0,l._)("li",null," Type of Mission: xyz "),(0,l._)("li",null," Type of Waste: xyz "),(0,l._)("li",null," Truck id: 123 ")],-1))),Ss={class:"flex flex-wrap align-content-start w-full"},Ws=Cs((()=>(0,l._)("i",{class:"pi pi-map-marker"},null,-1)));function xs(e,t,s,i,o,n){const a=(0,l.up)("Card"),r=(0,l.up)("Button"),u=(0,l.up)("Timeline");return(0,l.wg)(),(0,l.iD)("div",$s,[(0,l.Wm)(a,{class:"m-3"},{title:(0,l.w5)((()=>[js])),content:(0,l.w5)((()=>[Ds])),_:1}),(0,l.Wm)(u,{value:o.eventsToDisplay,align:"alternate",class:"w-full"},{marker:(0,l.w5)((e=>[(0,l.Wm)(r,{class:"p-button-rounded",icon:e.item.icon,style:(0,d.j5)({backgroundColor:e.item.color,borderColor:e.item.color}),onClick:t=>n.show(e.item.id)},null,8,["icon","style","onClick"])])),content:(0,l.w5)((e=>[(0,l._)("div",Ss,["next"!==e.item.id&&"prev"!==e.item.id?((0,l.wg)(),(0,l.j4)(a,{key:0},{title:(0,l.w5)((()=>[(0,l.Uk)(" STEP #"+(0,d.zw)(e.item.id),1)])),subtitle:(0,l.w5)((()=>[(0,l.Uk)((0,d.zw)(e.item.date)+" ",1),(0,l._)("div",null,[Ws,(0,l.Uk)(" "+(0,d.zw)(e.item.lat)+", "+(0,d.zw)(e.item.lng),1)])])),content:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l._)("p",null," Collection Point collected: "+(0,d.zw)(e.item.cp),1),(0,l._)("p",null," Dumpster ID: "+(0,d.zw)(e.item.dumpster),1)])])),_:2},1024)):(0,l.kq)("",!0)])])),_:1},8,["value"])])}s(3048);var Ps=s(4348),Is={name:"MissionDetails",components:{Timeline:Ps.Z,Card:I.Z,Button:f.Z},data(){return{events:[{id:"1",date:"16/10/2020 10:00",completed:!0,cp:"123",dumpster:"1",lat:"44.12",lng:"12.32"},{id:"2",date:"16/10/2020 10:00",completed:!0,cp:"123",dumpster:"1",lat:"44.12",lng:"12.32"},{id:"3",date:"16/10/2020 10:00",completed:!1,cp:"123",dumpster:"1",lat:"44.12",lng:"12.32"},{id:"4",date:"16/10/2020 10:00",completed:!1,cp:"123",dumpster:"1",lat:"44.12",lng:"12.32"},{id:"5",date:"16/10/2020 10:00",completed:!1,cp:"123",dumpster:"1",lat:"44.12",lng:"12.32"}],eventsToDisplay:[]}},mounted(){console.log(this.events),this.events.forEach((e=>{e["icon"]=e.completed?"pi pi-check-circle":"pi pi-circle",e["color"]=e.completed?"#9cff57":"#ffeb3b",e["show"]=!1}));let e=this.events.filter((e=>!e.completed)).slice(0,2);console.log(e),e.forEach((e=>e["show"]=!0));let t=e[0];t["icon"]="pi pi-chevron-circle-up",t["color"]="#ffab00";let s=this.events.findLast((e=>e.completed));s["show"]=!0;let i={id:"next",icon:"pi pi-angle-double-up",color:"#aeaeae"},o={id:"prev",icon:"pi pi-angle-double-down",color:"#aeaeae"};this.eventsToDisplay=this.events.filter((e=>e.show)).reverse(),this.eventsToDisplay.unshift(i),this.eventsToDisplay.push(o)},methods:{show(e){if("next"===e||"prev"===e){this.events.filter((t=>"next"===e?!t.completed:t.completed)).forEach((e=>e["show"]=!0));let t=this.eventsToDisplay.find((t=>t.id===("next"===e?"prev":"next")));this.eventsToDisplay=this.events.filter((e=>e.show)).reverse(),t&&this.eventsToDisplay.splice("next"===e?this.eventsToDisplay.length:0,0,t)}}}};const Os=(0,V.Z)(Is,[["render",xs],["__scopeId","data-v-8e5b2db6"]]);var Ts=Os;const Vs=e=>((0,l.dD)("data-v-d5e556cc"),e=e(),(0,l.Cn)(),e),Es={class:"flex flex-column w-full",style:{"text-align":"center"}},Zs={style:{"text-align":"right"}},Ms={class:"flex justify-content-center col-12 md:col-4",style:{"background-color":"#EFF3F8"}},zs=Vs((()=>(0,l._)("p",null,"At Home Collection Booking",-1))),Us={style:{"list-style-type":"none","text-align":"left"}},Ns=(0,l.Uk)(" Status: "),As=(0,l.Uk)(" No Bookings to Show ");function Bs(e,t,s,i,o,n){const a=(0,l.up)("Button"),r=(0,l.up)("BookingFilterPanel"),u=(0,l.up)("OverlayPanel"),c=(0,l.up)("Card"),m=(0,l.up)("DataView"),p=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)("div",Es,[(0,l.Wm)(m,{value:n.filteredBookings,layout:"grid",paginator:!0,rows:9,class:"m-5"},{header:(0,l.w5)((()=>[(0,l._)("div",Zs,[(0,l.Wm)(a,{class:"p-button-text p-button-rounded",icon:"pi pi-filter",onClick:t[0]||(t[0]=t=>e.$refs.fop.toggle(t))})]),(0,l.Wm)(u,{ref:"fop"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{filters:o.filters,onFilters:n.applyFilters},null,8,["filters","onFilters"])])),_:1},512)])),grid:(0,l.w5)((e=>[(0,l._)("div",Ms,[(0,l.Wm)(c,{class:"m-5 w-full",style:{"box-shadow":"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)"}},{title:(0,l.w5)((()=>[zs])),subtitle:(0,l.w5)((()=>[(0,l.Uk)(" ID: "+(0,d.zw)(e.data._id),1)])),content:(0,l.w5)((()=>[(0,l._)("ul",Us,[(0,l._)("li",null,[Ns,(0,l._)("span",{class:(0,d.C_)("booking-status-"+e.data.status.toLowerCase())},(0,d.zw)(e.data.status),3)]),(0,l._)("li",null," Waste Type: "+(0,d.zw)(e.data.typeOfWaste.wasteName),1)]),(0,l._)("p",null,"MADE ON "+(0,d.zw)(n.printPrettyDate(e.data.datetime)),1)])),_:2},1024)])])),empty:(0,l.w5)((()=>[As])),_:1},8,["value"]),i.userStore.isCitizen?((0,l.wg)(),(0,l.j4)(p,{key:0,to:"/dashboard/bookings/new"},{default:(0,l.w5)((({href:e,navigate:t})=>[(0,l.Wm)(a,{href:e,label:"Create New",class:"p-button-raised",onClick:t},null,8,["href","onClick"])])),_:1})):(0,l.kq)("",!0)])}var qs=s(6797),Fs=s.n(qs);const Rs=e=>((0,l.dD)("data-v-1e8c2bac"),e=e(),(0,l.Cn)(),e),Ls={class:"outer-container"},Hs=Rs((()=>(0,l._)("h5",null,"STATUS",-1))),Ys=["for"],Gs=Rs((()=>(0,l._)("h5",null,"TYPE OF WASTE",-1))),Ks=["for"],Xs=(0,l.Uk)(" Apply ");function Qs(e,t,s,i,o,n){const a=(0,l.up)("Checkbox"),r=(0,l.up)("Divider"),u=(0,l.up)("Button");return(0,l.wg)(),(0,l.iD)("div",Ls,[Hs,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.states,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e,class:"field-checkbox"},[(0,l.Wm)(a,{modelValue:o.statusFilters,"onUpdate:modelValue":t[0]||(t[0]=e=>o.statusFilters=e),name:"state","input-id":"state"+e.toLowerCase(),value:e},null,8,["modelValue","input-id","value"]),(0,l._)("label",{class:(0,d.C_)("booking-status-"+e.toLowerCase()),for:"state"+e.toLowerCase()},(0,d.zw)(e),11,Ys)])))),128)),Gs,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.typesOfWaste,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e,class:"field-checkbox"},[(0,l.Wm)(a,{modelValue:o.wasteFilters,"onUpdate:modelValue":t[1]||(t[1]=e=>o.wasteFilters=e),name:"waste","input-id":"waste"+e.toLowerCase(),value:e},null,8,["modelValue","input-id","value"]),(0,l._)("label",{for:"waste"+e.toLowerCase()},(0,d.zw)(e),9,Ks)])))),128)),(0,l.Wm)(r),(0,l.Wm)(u,{class:"p-button-sm",onClick:t[2]||(t[2]=t=>e.$emit("filters",{statusFilters:o.statusFilters,wasteFilters:o.wasteFilters}))},{default:(0,l.w5)((()=>[Xs])),_:1})])}var Js={name:"ComplaintFilterPanel",components:{Checkbox:Lt.Z,Divider:ae.Z,Button:f.Z},props:{filters:{type:Object,require:!0,default:null}},emits:["filters"],setup(){const e=M();return{userStore:e}},data(){return{statusFilters:this.filters.statusFilters,wasteFilters:this.filters.wasteFilters,states:["PENDING","ASSIGNED","COMPLETED"],typesOfWaste:["TWIGS","WASTE OIL","IRON","ELECTRONICS","CLOTHES","OTHER"]}}};const ei=(0,V.Z)(Js,[["render",Qs],["__scopeId","data-v-1e8c2bac"]]);var ti=ei,si={name:"BookingList",components:{BookingFilterPanel:ti,Button:f.Z,DataView:Pt.Z,Card:I.Z,OverlayPanel:v.Z},setup(){const e=M(),t=W();return{userStore:e,bookingStore:t}},data(){return{bookings:[],filters:{statusFilters:[],wasteFilters:[]}}},computed:{filteredBookings(){return this.bookingStore.bookings.filter((e=>0===this.filters.statusFilters.length||this.filters.statusFilters.includes(e.status))).filter((e=>0===this.filters.wasteFilters.length||this.filters.wasteFilters.includes(e.typeOfWaste.wasteName)))}},created(){this.userStore.isCitizen?this.bookingStore.fetchUserBookings(this.userStore.userId):this.userStore.isManager&&this.bookingStore.fetchAllBookings()},methods:{printPrettyDate(e){return Fs()(e).format("DD MMMM YYYY")},applyFilters(e){this.filters=e,this.$refs.fop.hide()}}};const ii=(0,V.Z)(si,[["render",Bs],["__scopeId","data-v-d5e556cc"]]);var oi=ii;const li={class:"flex align-items-center flex-column pt-6 px-3"},ni=(0,l._)("h5",null,"Booking successfully registered!",-1),ai={class:"flex justify-content-center"},ri={class:"flex justify-content-center"},di=(0,l.Uk)(' Create Your New "At Home" Collection Booking '),ui=(0,l._)("br",null,null,-1),ci={class:"field"},mi={class:"p-float-label"},pi=(0,l._)("label",{for:"waste"},"Type Of Waste*",-1),fi={key:0,class:"p-error"},vi=(0,l._)("br",null,null,-1),hi={class:"field"},gi={class:"p-float-label"},bi={key:0,class:"p-error"},wi=(0,l._)("br",null,null,-1),ki={class:"field"},_i={class:"p-float-label"},yi={key:0,class:"p-error"},Ci=(0,l._)("br",null,null,-1),$i={class:"field"},ji={class:"p-float-label"},Di={key:0,class:"p-error"},Si=(0,l._)("br",null,null,-1);function Wi(e,t,s,o,n,a){const r=(0,l.up)("Button"),u=(0,l.up)("Dialog"),c=(0,l.up)("Dropdown"),m=(0,l.up)("InputText"),p=(0,l.up)("Card");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(u,{visible:n.showMessage,"onUpdate:visible":t[0]||(t[0]=e=>n.showMessage=e),breakpoints:{"960px":"80vw"},style:{width:"30vw"},position:"top"},{footer:(0,l.w5)((()=>[(0,l._)("div",ai,[(0,l.Wm)(r,{label:"OK",class:"p-button-text",onClick:a.toggleDialog},null,8,["onClick"])])])),default:(0,l.w5)((()=>[(0,l._)("div",li,[(0,l._)("i",{class:"pi pi-check-circle",style:(0,d.j5)({fontSize:"5rem",color:"var(--green-500)"})},null,4),ni,(0,l._)("p",{style:(0,d.j5)({lineHeight:1.5,textIndent:"1rem"})},' Your booking is registered! You will receive a notification when the date for your "At Home" Collection is determines ',4)])])),_:1},8,["visible"]),(0,l._)("div",ri,[(0,l.Wm)(p,null,{title:(0,l.w5)((()=>[di])),content:(0,l.w5)((()=>[(0,l._)("form",{class:"p-fluid",onSubmit:t[5]||(t[5]=(0,i.iM)((e=>a.handleSubmit(!o.v$.$invalid)),["prevent"]))},[(0,l._)("div",ci,[(0,l._)("div",mi,[(0,l.Wm)(c,{id:"waste",modelValue:n.waste,"onUpdate:modelValue":t[1]||(t[1]=e=>n.waste=e),options:n.typesOfWaste,"option-label":"name"},null,8,["modelValue","options"]),pi]),o.v$.waste.$invalid&&n.submitted||o.v$.waste.$pending.$response?((0,l.wg)(),(0,l.iD)("small",fi,(0,d.zw)(o.v$.waste.required.$message.replace("Value","Type Of Waste")),1)):(0,l.kq)("",!0)]),vi,(0,l._)("div",hi,[(0,l._)("div",gi,[(0,l.Wm)(m,{id:"city",modelValue:o.v$.city.$model,"onUpdate:modelValue":t[2]||(t[2]=e=>o.v$.city.$model=e),class:(0,d.C_)({"p-invalid":o.v$.city.$invalid&&n.submitted})},null,8,["modelValue","class"]),(0,l._)("label",{for:"city",class:(0,d.C_)({"p-error":o.v$.city.$invalid&&n.submitted})},"City*",2)]),o.v$.city.$invalid&&n.submitted||o.v$.city.$pending.$response?((0,l.wg)(),(0,l.iD)("small",bi,(0,d.zw)(o.v$.city.required.$message.replace("Value","City")),1)):(0,l.kq)("",!0)]),wi,(0,l._)("div",ki,[(0,l._)("div",_i,[(0,l.Wm)(m,{id:"province",modelValue:o.v$.province.$model,"onUpdate:modelValue":t[3]||(t[3]=e=>o.v$.province.$model=e),class:(0,d.C_)({"p-invalid":o.v$.province.$invalid&&n.submitted})},null,8,["modelValue","class"]),(0,l._)("label",{for:"province",class:(0,d.C_)({"p-error":o.v$.province.$invalid&&n.submitted})},"Province*",2)]),o.v$.province.$invalid&&n.submitted||o.v$.province.$pending.$response?((0,l.wg)(),(0,l.iD)("small",yi,(0,d.zw)(o.v$.province.required.$message.replace("Value","Province")),1)):(0,l.kq)("",!0)]),Ci,(0,l._)("div",$i,[(0,l._)("div",ji,[(0,l.Wm)(m,{id:"address",modelValue:o.v$.address.$model,"onUpdate:modelValue":t[4]||(t[4]=e=>o.v$.address.$model=e),class:(0,d.C_)({"p-invalid":o.v$.address.$invalid&&n.submitted})},null,8,["modelValue","class"]),(0,l._)("label",{for:"address",class:(0,d.C_)({"p-error":o.v$.address.$invalid&&n.submitted})},"Address*",2)]),o.v$.address.$invalid&&n.submitted||o.v$.address.$pending.$response?((0,l.wg)(),(0,l.iD)("small",Di,(0,d.zw)(o.v$.address.required.$message.replace("Value","Address")),1)):(0,l.kq)("",!0)]),Si,(0,l.Wm)(r,{type:"submit",label:"Submit",class:"mt-2",disabled:n.submitted},null,8,["disabled"])],32)])),default:(0,l.w5)((()=>[ui])),_:1})])],64)}var xi=s(5517),Pi=s(2419),Ii={name:"BookingForm",components:{Dropdown:xi.Z,Button:f.Z,Card:I.Z,InputText:ps.Z,Dialog:Pi.Z},setup(){const e=M();return{v$:(0,vs.Xw)(),userStore:e}},data(){return{waste:null,city:"",province:"",address:"",typesOfWaste:[{name:"TWIGS"},{name:"WASTE OIL"},{name:"IRON"},{name:"ELECTRONICS"},{name:"CLOTHES"},{name:"OTHER"}],submitted:null,showMessage:!1}},validations(){return{city:{required:fs.C1},province:{required:fs.C1},address:{required:fs.C1},waste:{required:fs.C1}}},methods:{handleSubmit(e){if(this.submitted=!0,e){let e={userId:this.userStore.userId,typeOfWaste:{wasteName:this.waste.name},city:this.city,province:this.province,address:this.address};console.log(e),S().post("http://localhost:3000/bookings",e).then((e=>{200===e.status&&(console.log(e.data),this.toggleDialog())}))}},toggleDialog(){this.showMessage=!this.showMessage,this.showMessage||this.$router.push("/dashboard/bookings")}}};const Oi=(0,V.Z)(Ii,[["render",Wi]]);var Ti=Oi;const Vi={class:"flex align-items-center flex-column pt-6 px-3"},Ei=(0,l._)("h5",null,"Account successfully registered!",-1),Zi={class:"flex justify-content-center"},Mi={class:"flex justify-content-center"},zi=(0,l.Uk)(" Registration "),Ui=(0,l._)("br",null,null,-1),Ni={class:"field"},Ai={class:"p-float-label"},Bi={key:0,class:"p-error"},qi=(0,l._)("br",null,null,-1),Fi={class:"field"},Ri={class:"p-float-label"},Li={key:0,class:"p-error"},Hi=(0,l._)("br",null,null,-1),Yi={class:"field"},Gi={class:"p-float-label"},Ki={key:0,class:"p-error"},Xi=(0,l._)("br",null,null,-1),Qi={class:"field"},Ji={class:"p-float-label"},eo={key:0,class:"p-error"},to=(0,l._)("br",null,null,-1);function so(e,t,s,o,n,a){const r=(0,l.up)("Button"),u=(0,l.up)("Dialog"),c=(0,l.up)("InputText"),m=(0,l.up)("Password"),p=(0,l.up)("Card");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(u,{visible:n.showMessage,"onUpdate:visible":t[0]||(t[0]=e=>n.showMessage=e),breakpoints:{"960px":"80vw"},style:{width:"30vw"},position:"top"},{footer:(0,l.w5)((()=>[(0,l._)("div",Zi,[(0,l.Wm)(r,{label:"OK",class:"p-button-text",onClick:a.toggleDialog},null,8,["onClick"])])])),default:(0,l.w5)((()=>[(0,l._)("div",Vi,[(0,l._)("i",{class:"pi pi-check-circle",style:(0,d.j5)({fontSize:"5rem",color:"var(--green-500)"})},null,4),Ei])])),_:1},8,["visible"]),(0,l._)("div",Mi,[(0,l.Wm)(p,null,{title:(0,l.w5)((()=>[zi])),content:(0,l.w5)((()=>[(0,l._)("form",{class:"p-fluid",onSubmit:t[5]||(t[5]=(0,i.iM)((t=>a.handleSubmit(!e.v$.$invalid)),["prevent"]))},[(0,l._)("div",Ni,[(0,l._)("div",Ai,[(0,l.Wm)(c,{id:"firstname",modelValue:e.v$.firstname.$model,"onUpdate:modelValue":t[1]||(t[1]=t=>e.v$.firstname.$model=t),class:(0,d.C_)({"p-invalid":e.v$.firstname.$invalid&&n.submitted})},null,8,["modelValue","class"]),(0,l._)("label",{for:"firstname",class:(0,d.C_)({"p-error":e.v$.firstname.$invalid&&n.submitted})},"First Name*",2)]),e.v$.firstname.$invalid&&n.submitted||e.v$.firstname.$pending.$response?((0,l.wg)(),(0,l.iD)("small",Bi,(0,d.zw)(e.v$.firstname.required.$message.replace("Value","First Name")),1)):(0,l.kq)("",!0)]),qi,(0,l._)("div",Fi,[(0,l._)("div",Ri,[(0,l.Wm)(c,{id:"lastname",modelValue:e.v$.lastname.$model,"onUpdate:modelValue":t[2]||(t[2]=t=>e.v$.lastname.$model=t),class:(0,d.C_)({"p-invalid":e.v$.lastname.$invalid&&n.submitted})},null,8,["modelValue","class"]),(0,l._)("label",{for:"lastname",class:(0,d.C_)({"p-error":e.v$.lastname.$invalid&&n.submitted})},"Last Name*",2)]),e.v$.lastname.$invalid&&n.submitted||e.v$.lastname.$pending.$response?((0,l.wg)(),(0,l.iD)("small",Li,(0,d.zw)(e.v$.lastname.required.$message.replace("Value","Last Name")),1)):(0,l.kq)("",!0)]),Hi,(0,l._)("div",Yi,[(0,l._)("div",Gi,[(0,l.Wm)(c,{id:"email",modelValue:e.v$.email.$model,"onUpdate:modelValue":t[3]||(t[3]=t=>e.v$.email.$model=t),class:(0,d.C_)({"p-invalid":e.v$.email.$invalid&&n.submitted})},null,8,["modelValue","class"]),(0,l._)("label",{for:"email",class:(0,d.C_)({"p-error":e.v$.email.$invalid&&n.submitted})},"Email*",2)]),e.v$.email.$invalid&&n.submitted||e.v$.email.$pending.$response?((0,l.wg)(),(0,l.iD)("small",Ki,(0,d.zw)(e.v$.email.required.$message.replace("Value","Email")),1)):(0,l.kq)("",!0)]),Xi,(0,l._)("div",Qi,[(0,l._)("div",Ji,[(0,l.Wm)(m,{id:"password",modelValue:n.password,"onUpdate:modelValue":t[4]||(t[4]=e=>n.password=e),class:(0,d.C_)({"p-error":e.v$.password.$invalid&&n.submitted}),"toggle-mask":""},null,8,["modelValue","class"]),(0,l._)("label",{for:"password",class:(0,d.C_)({"p-error":e.v$.password.$invalid&&n.submitted})},"Password*",2)]),e.v$.password.$invalid&&n.submitted||e.v$.password.$pending.$response?((0,l.wg)(),(0,l.iD)("small",eo,(0,d.zw)(e.v$.password.required.$message.replace("Value","Password")),1)):(0,l.kq)("",!0)]),to,(0,l.Wm)(r,{type:"submit",label:"Submit",class:"mt-2"})],32)])),default:(0,l.w5)((()=>[Ui])),_:1})])],64)}var io={name:"RegistrationForm",components:{Password:hs.Z,Button:f.Z,Card:I.Z,InputText:ps.Z,Dialog:Pi.Z},setup:()=>({v$:(0,vs.Xw)()}),data(){return{firstname:"",lastname:"",email:"",password:"",submitted:null,showMessage:!1}},validations(){return{email:{required:fs.C1,email:fs.Do},lastname:{required:fs.C1},firstname:{required:fs.C1},password:{required:fs.C1,minLength:(0,fs.Ei)(8)}}},methods:{handleSubmit(e){if(this.submitted=!0,e){let e={firstname:this.firstname,lastname:this.lastname,username:this.email,password:this.password};console.log(e),S().post("http://localhost:3002/authentication/register",e).then((e=>{200===e.status&&(console.log(e.data),this.toggleDialog())}))}},toggleDialog(){this.showMessage=!this.showMessage,this.showMessage||this.$router.push("/dashboard/account")}}};const oo=(0,V.Z)(io,[["render",so]]);var lo=oo;const no={class:"flex align-items-center flex-column pt-6 px-3"},ao=(0,l._)("h5",null,"Complaint successfully registered!",-1),ro={class:"flex justify-content-center"},uo={class:"flex justify-content-center"},co=(0,l.Uk)(" Create a new complaint "),mo=(0,l._)("br",null,null,-1),po={class:"field"},fo={class:"p-float-label"},vo={key:0,class:"p-error"},ho=(0,l._)("br",null,null,-1),go={class:"field"},bo={class:"p-float-label"},wo={key:0,class:"p-error"},ko=(0,l._)("br",null,null,-1);function _o(e,t,s,o,n,a){const r=(0,l.up)("Button"),u=(0,l.up)("Dialog"),c=(0,l.up)("InputText"),m=(0,l.up)("Textarea"),p=(0,l.up)("Card");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(u,{visible:n.showMessage,"onUpdate:visible":t[0]||(t[0]=e=>n.showMessage=e),breakpoints:{"960px":"80vw"},style:{width:"30vw"},position:"top"},{footer:(0,l.w5)((()=>[(0,l._)("div",ro,[(0,l.Wm)(r,{label:"OK",class:"p-button-text",onClick:a.toggleDialog},null,8,["onClick"])])])),default:(0,l.w5)((()=>[(0,l._)("div",no,[(0,l._)("i",{class:"pi pi-check-circle",style:(0,d.j5)({fontSize:"5rem",color:"var(--green-500)"})},null,4),ao,(0,l._)("p",{style:(0,d.j5)({lineHeight:1.5,textIndent:"1rem"})}," Thanks to send us the complaint! We will trying to close it asap to give you a better service ",4)])])),_:1},8,["visible"]),(0,l._)("div",uo,[(0,l.Wm)(p,{style:{width:"40vw"}},{title:(0,l.w5)((()=>[co])),content:(0,l.w5)((()=>[(0,l._)("form",{class:"p-fluid",onSubmit:t[3]||(t[3]=(0,i.iM)((e=>a.handleSubmit(!o.v$.$invalid)),["prevent"]))},[(0,l._)("div",po,[(0,l._)("div",fo,[(0,l.Wm)(c,{id:"title",modelValue:o.v$.title.$model,"onUpdate:modelValue":t[1]||(t[1]=e=>o.v$.title.$model=e),class:(0,d.C_)({"p-invalid":o.v$.title.$invalid&&n.submitted})},null,8,["modelValue","class"]),(0,l._)("label",{for:"title",class:(0,d.C_)({"p-error":o.v$.title.$invalid&&n.submitted})},"Title",2)]),o.v$.title.$invalid&&n.submitted||o.v$.title.$pending.$response?((0,l.wg)(),(0,l.iD)("small",vo,(0,d.zw)(o.v$.title.required.$message.replace("Value","Title")),1)):(0,l.kq)("",!0)]),ho,(0,l._)("div",go,[(0,l._)("div",bo,[(0,l.Wm)(m,{id:"message",modelValue:o.v$.message.$model,"onUpdate:modelValue":t[2]||(t[2]=e=>o.v$.message.$model=e),"auto-resize":!0,rows:"5",cols:"30",class:(0,d.C_)({"p-invalid":o.v$.message.$invalid&&n.submitted})},null,8,["modelValue","class"]),(0,l._)("label",{for:"message",class:(0,d.C_)({"p-error":o.v$.message.$invalid&&n.submitted})},"Description",2)]),o.v$.message.$invalid&&n.submitted||o.v$.message.$pending.$response?((0,l.wg)(),(0,l.iD)("small",wo,(0,d.zw)(o.v$.message.required.$message.replace("Value","Description")),1)):(0,l.kq)("",!0)]),ko,(0,l.Wm)(r,{type:"submit",label:"Submit",class:"mt-2"})],32)])),default:(0,l.w5)((()=>[mo])),_:1})])],64)}var yo=s(3337),Co={name:"BookingForm",components:{Button:f.Z,Card:I.Z,InputText:ps.Z,Textarea:yo.Z,Dialog:Pi.Z},setup(){const e=M();return{v$:(0,vs.Xw)(),userStore:e}},data(){return{title:"",message:"",submitted:null,showMessage:!1}},validations(){return{title:{required:fs.C1},message:{required:fs.C1}}},methods:{handleSubmit(e){if(this.submitted=!0,e){let e={ownerId:this.userStore.userId,issuer:"USER",title:this.title,message:this.message};console.log(e)}},toggleDialog(){this.showMessage=!this.showMessage,this.showMessage||this.$router.push("/dashboard/bookings")}}};const $o=(0,V.Z)(Co,[["render",_o]]);var jo=$o;function Do(e,t,s,i,o,l){return" Trucks "}var So={name:"TrucksList"};const Wo=(0,V.Z)(So,[["render",Do]]);var xo=Wo;const Po={class:"flex align-items-center flex-column pt-6 px-3"},Io=(0,l._)("h5",null,"Collection Point successfully registered!",-1),Oo={class:"flex justify-content-center"},To={class:"flex justify-content-center max-w-25rem"},Vo=(0,l.Uk)(" Add new Collection Point "),Eo=(0,l._)("br",null,null,-1),Zo={class:"field"},Mo={class:"p-float-label"},zo={key:0,class:"p-error"},Uo=(0,l._)("br",null,null,-1),No={class:"field"},Ao={class:"p-float-label"},Bo={key:0,class:"p-error"},qo={key:0,class:"flex-column justify-content-evenly flex-wrap mb-2"},Fo={key:1,class:"flex justify-content-evenly align-content-center"},Ro=(0,l._)("p",null,"Add a Dumpster",-1);function Lo(e,t,s,o,n,a){const r=(0,l.up)("Button"),u=(0,l.up)("Dialog"),c=(0,l.up)("InputNumber"),m=(0,l.up)("Divider"),p=(0,l.up)("Chip"),f=(0,l.up)("DumpsterForm"),v=(0,l.up)("Card");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(u,{visible:n.showMessage,"onUpdate:visible":t[0]||(t[0]=e=>n.showMessage=e),breakpoints:{"960px":"80vw"},style:{width:"30vw"},position:"top"},{footer:(0,l.w5)((()=>[(0,l._)("div",Oo,[(0,l.Wm)(r,{label:"OK",class:"p-button-text",onClick:a.toggleDialog},null,8,["onClick"])])])),default:(0,l.w5)((()=>[(0,l._)("div",Po,[(0,l._)("i",{class:"pi pi-check-circle",style:(0,d.j5)({fontSize:"5rem",color:"var(--green-500)"})},null,4),Io])])),_:1},8,["visible"]),(0,l._)("div",To,[(0,l.Wm)(v,null,{title:(0,l.w5)((()=>[Vo])),content:(0,l.w5)((()=>[(0,l._)("form",{class:"p-fluid",onSubmit:t[5]||(t[5]=(0,i.iM)((e=>a.handleSubmit(!o.v$.$invalid)),["prevent"]))},[(0,l._)("div",Zo,[(0,l._)("div",Mo,[(0,l.Wm)(c,{id:"latitude",modelValue:o.v$.latitude.$model,"onUpdate:modelValue":t[1]||(t[1]=e=>o.v$.latitude.$model=e),class:(0,d.C_)({"p-invalid":o.v$.latitude.$invalid&&n.submitted}),"min-fraction-digits":4,"max-fraction-digits":14},null,8,["modelValue","class"]),(0,l._)("label",{for:"latitude",class:(0,d.C_)({"p-error":o.v$.latitude.$invalid&&n.submitted})},"Latitude*",2)]),o.v$.latitude.$invalid&&n.submitted||o.v$.latitude.$pending.$response?((0,l.wg)(),(0,l.iD)("small",zo,(0,d.zw)(o.v$.latitude.required.$message.replace("Value","Latitude")),1)):(0,l.kq)("",!0)]),Uo,(0,l._)("div",No,[(0,l._)("div",Ao,[(0,l.Wm)(c,{id:"province",modelValue:o.v$.longitude.$model,"onUpdate:modelValue":t[2]||(t[2]=e=>o.v$.longitude.$model=e),class:(0,d.C_)({"p-invalid":o.v$.longitude.$invalid&&n.submitted}),"min-fraction-digits":4,"max-fraction-digits":14},null,8,["modelValue","class"]),(0,l._)("label",{for:"longitude",class:(0,d.C_)({"p-error":o.v$.longitude.$invalid&&n.submitted})},"Longitude*",2)]),o.v$.longitude.$invalid&&n.submitted||o.v$.longitude.$pending.$response?((0,l.wg)(),(0,l.iD)("small",Bo,(0,d.zw)(o.v$.longitude.required.$message.replace("Value","Longitude")),1)):(0,l.kq)("",!0)]),(0,l.Wm)(m),n.dumpsters.length>0?((0,l.wg)(),(0,l.iD)("div",qo,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.dumpsters,(e=>((0,l.wg)(),(0,l.j4)(p,{key:e.capacity,label:e.waste.name,class:"m-1",removable:"",onRemove:t=>n.dumpsters.splice(n.dumpsters.indexOf(e),1)},null,8,["label","onRemove"])))),128))])):(0,l.kq)("",!0),n.showDumpsterForm?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",Fo,[Ro,(0,l.Wm)(r,{class:"p-button-rounded",icon:"pi pi-plus",onClick:t[3]||(t[3]=e=>n.showDumpsterForm=!0)})])),n.showDumpsterForm?((0,l.wg)(),(0,l.j4)(f,{key:2,onDumpster:t[4]||(t[4]=e=>{n.showDumpsterForm=!1,n.dumpsters.push(e)})})):(0,l.kq)("",!0),(0,l.Wm)(r,{type:"submit",label:"Submit",class:"mt-2",disabled:n.submitted},null,8,["disabled"])],32)])),default:(0,l.w5)((()=>[Eo])),_:1})])],64)}var Ho=s(1583);const Yo={class:"flex justify-content-center"},Go=(0,l.Uk)(" Add new Dumpster "),Ko=(0,l._)("br",null,null,-1),Xo={class:"field"},Qo={class:"p-float-label"},Jo=(0,l._)("label",{for:"waste"},"Type Of Waste*",-1),el={key:0,class:"p-error"},tl=(0,l._)("br",null,null,-1),sl={class:"field"},il={class:"p-float-label"},ol={key:0,class:"p-error"},ll=(0,l._)("br",null,null,-1);function nl(e,t,s,o,n,a){const r=(0,l.up)("Dropdown"),u=(0,l.up)("InputNumber"),c=(0,l.up)("Button"),m=(0,l.up)("Card");return(0,l.wg)(),(0,l.iD)("div",Yo,[(0,l.Wm)(m,null,{title:(0,l.w5)((()=>[Go])),content:(0,l.w5)((()=>[(0,l._)("form",{class:"p-fluid",onSubmit:t[2]||(t[2]=(0,i.iM)((e=>a.handleSubmit(!o.v$.$invalid)),["prevent"]))},[(0,l._)("div",Xo,[(0,l._)("div",Qo,[(0,l.Wm)(r,{id:"waste",modelValue:n.waste,"onUpdate:modelValue":t[0]||(t[0]=e=>n.waste=e),options:n.typesOfWaste,"option-label":"name"},null,8,["modelValue","options"]),Jo]),o.v$.waste.$invalid&&n.submitted||o.v$.waste.$pending.$response?((0,l.wg)(),(0,l.iD)("small",el,(0,d.zw)(o.v$.waste.required.$message.replace("Value","Type Of Waste")),1)):(0,l.kq)("",!0)]),tl,(0,l._)("div",sl,[(0,l._)("div",il,[(0,l.Wm)(u,{id:"capacity",modelValue:o.v$.capacity.$model,"onUpdate:modelValue":t[1]||(t[1]=e=>o.v$.capacity.$model=e),class:(0,d.C_)({"p-invalid":o.v$.capacity.$invalid&&n.submitted}),"min-fraction-digits":2,"max-fraction-digits":2},null,8,["modelValue","class"]),(0,l._)("label",{for:"capacity",class:(0,d.C_)({"p-error":o.v$.capacity.$invalid&&n.submitted})},"Capacity*",2)]),o.v$.capacity.$invalid&&n.submitted||o.v$.capacity.$pending.$response?((0,l.wg)(),(0,l.iD)("small",ol,(0,d.zw)(o.v$.capacity.required.$message.replace("Value","Capacity")),1)):(0,l.kq)("",!0)]),ll,(0,l.Wm)(c,{type:"submit",label:"Add",class:"mt-2",disabled:n.submitted},null,8,["disabled"])],32)])),default:(0,l.w5)((()=>[Ko])),_:1})])}var al={name:"DumpsterForm",components:{Dropdown:xi.Z,Button:f.Z,Card:I.Z,InputNumber:Ho.Z},emits:["dumpster"],setup(){const e=M();return{v$:(0,vs.Xw)(),userStore:e}},data(){return{waste:null,capacity:0,typesOfWaste:[{name:"PLASTIC_ALUMINIUM"},{name:"GLASS"},{name:"PAPER"},{name:"ORGANIC"}],submitted:null,showMessage:!1}},validations(){return{capacity:{required:fs.C1},waste:{required:fs.C1}}},methods:{handleSubmit(e){this.submitted=!0,e&&this.$emit("dumpster",{waste:this.waste,capacity:this.capacity})}}};const rl=(0,V.Z)(al,[["render",nl]]);var dl=rl,ul=s(8077),cl={name:"CollectionPointForm",components:{DumpsterForm:dl,Divider:ae.Z,Button:f.Z,Card:I.Z,InputNumber:Ho.Z,Dialog:Pi.Z,Chip:ul.Z},setup(){const e=M();return{v$:(0,vs.Xw)(),userStore:e}},data(){return{waste:null,latitude:this.$route.params.position[0],longitude:this.$route.params.position[1],typesOfWaste:[{name:"TWIGS"},{name:"WASTE OIL"},{name:"IRON"},{name:"ELECTRONICS"},{name:"CLOTHES"},{name:"OTHER"}],dumpsters:[],submitted:null,showDumpsterForm:!1,showMessage:!1}},validations(){return{latitude:{required:fs.C1},longitude:{required:fs.C1}}},methods:{handleSubmit(e){if(this.submitted=!0,e){let e={latitude:this.latitude,longitude:this.longitude};S().post("http://localhost:3001/collectionpoints/",e).then((e=>{200===e.status&&(console.log(e.data),Promise.all(this.dumpsters.map((t=>{let s={dumpster:{capacity:t.capacity,wasteName:t.waste.name},collectionPointId:e.data.id};return S().post("http://localhost:3001/dumpsters/",s)}))).then((()=>{this.toggleDialog()})))}))}},toggleDialog(){this.showMessage=!this.showMessage,this.showMessage||this.$router.push("/dashboard/map")}}};const ml=(0,V.Z)(cl,[["render",Lo]]);var pl=ml;const fl=[{path:"/dashboard",name:"",component:rt},{path:"/dashboard/map",name:"Map",component:rt},{path:"/dashboard/collectionPoints/new/:position*",name:"Collection Point Form",component:pl},{path:"/dashboard/trucks",name:"Trucks",component:xo},{path:"/dashboard/missions",name:"Missions",component:bt},{path:"/dashboard/missions/:id",name:"Missions Details",component:Ts},{path:"/dashboard/complaints",name:"Complaints",component:Qt},{path:"/dashboard/complaints/new",name:"Complaint Form",component:jo},{path:"/dashboard/bookings",name:"Bookings",component:oi},{path:"/dashboard/bookings/new",name:"Bookings Form",component:Ti},{path:"/dashboard/account",name:"Account",component:ys},{path:"/dashboard/account/registration",name:"Registration Form",component:lo}],vl=(0,Y.p7)({history:(0,Y.PO)(),routes:fl});vl.beforeEach((e=>{const t=M(),s=x();if("Account"!==e.name&&"Map"!==e.name&&""!==e.name&&"Registration Form"!==e.name&&!t.isLogged)return"/dashboard/account";""!==s.sessionId&&t.isLogged&&s.reconnect()}));const hl=(0,o.WB)();hl.use(G.Z);const gl=(0,i.ri)(F);gl.use(hl),gl.use(R.Z),gl.use(L.Z),gl.use(vl),gl.directive("badge",H.Z),gl.mount("#app")}},t={};function s(i){var o=t[i];if(void 0!==o)return o.exports;var l=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(l.exports,l,l.exports,s),l.loaded=!0,l.exports}s.m=e,function(){var e=[];s.O=function(t,i,o,l){if(!i){var n=1/0;for(u=0;u<e.length;u++){i=e[u][0],o=e[u][1],l=e[u][2];for(var a=!0,r=0;r<i.length;r++)(!1&l||n>=l)&&Object.keys(s.O).every((function(e){return s.O[e](i[r])}))?i.splice(r--,1):(a=!1,l<n&&(n=l));if(a){e.splice(u--,1);var d=o();void 0!==d&&(t=d)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[i,o,l]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};s.t=function(i,o){if(1&o&&(i=this(i)),8&o)return i;if("object"===typeof i&&i){if(4&o&&i.__esModule)return i;if(16&o&&"function"===typeof i.then)return i}var l=Object.create(null);s.r(l);var n={};e=e||[null,t({}),t([]),t(t)];for(var a=2&o&&i;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((function(e){n[e]=function(){return i[e]}}));return n["default"]=function(){return i},s.d(l,n),l}}(),function(){s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){s.f={},s.e=function(e){return Promise.all(Object.keys(s.f).reduce((function(t,i){return s.f[i](e,t),t}),[]))}}(),function(){s.u=function(e){return"js/"+e+"."+{93:"ed65c43c",431:"c5216f61",858:"a82c0db2",891:"682590b2"}[e]+".js"}}(),function(){s.miniCssF=function(e){}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="dashboard:";s.l=function(i,o,l,n){if(e[i])e[i].push(o);else{var a,r;if(void 0!==l)for(var d=document.getElementsByTagName("script"),u=0;u<d.length;u++){var c=d[u];if(c.getAttribute("src")==i||c.getAttribute("data-webpack")==t+l){a=c;break}}a||(r=!0,a=document.createElement("script"),a.charset="utf-8",a.timeout=120,s.nc&&a.setAttribute("nonce",s.nc),a.setAttribute("data-webpack",t+l),a.src=i),e[i]=[o];var m=function(t,s){a.onerror=a.onload=null,clearTimeout(p);var o=e[i];if(delete e[i],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((function(e){return e(s)})),t)return t(s)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=m.bind(null,a.onerror),a.onload=m.bind(null,a.onload),r&&document.head.appendChild(a)}}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){s.p="/dashboard/"}(),function(){var e={143:0};s.f.j=function(t,i){var o=s.o(e,t)?e[t]:void 0;if(0!==o)if(o)i.push(o[2]);else{var l=new Promise((function(s,i){o=e[t]=[s,i]}));i.push(o[2]=l);var n=s.p+s.u(t),a=new Error,r=function(i){if(s.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var l=i&&("load"===i.type?"missing":i.type),n=i&&i.target&&i.target.src;a.message="Loading chunk "+t+" failed.\n("+l+": "+n+")",a.name="ChunkLoadError",a.type=l,a.request=n,o[1](a)}};s.l(n,r,"chunk-"+t,t)}},s.O.j=function(t){return 0===e[t]};var t=function(t,i){var o,l,n=i[0],a=i[1],r=i[2],d=0;if(n.some((function(t){return 0!==e[t]}))){for(o in a)s.o(a,o)&&(s.m[o]=a[o]);if(r)var u=r(s)}for(t&&t(i);d<n.length;d++)l=n[d],s.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return s.O(u)},i=self["webpackChunkdashboard"]=self["webpackChunkdashboard"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998],(function(){return s(9509)}));i=s.O(i)})();
//# sourceMappingURL=app.b7565d4e.js.map